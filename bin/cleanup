#!/usr/bin/env bash

ROOT_DIR=$( cd -- "$(dirname $(dirname -- "${BASH_SOURCE[0]}" ))" &> /dev/null && pwd )

REMOVE_DIRECTORIES="nifi/database_repository
nifi/flowfile_repository
nifi/content_repository
nifi/provenance_repository
nifi/state
nifi/logs"

MOVE_TARGET="nifi/.trash/`date +%s`"

echo "Cleaning up nifi config"

mkdir -p "${ROOT_DIR}/$MOVE_TARGET/nifi"

echo "Files are backed up in ${MOVE_TARGET}"

for mvdir in $REMOVE_DIRECTORIES; do
    echo "Moving ${mvdir}" 
    mv "${ROOT_DIR}/${mvdir}" "${ROOT_DIR}/$MOVE_TARGET/${mvdir}"
done

